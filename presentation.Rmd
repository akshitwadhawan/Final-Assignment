---
title: "Investigating the Predictors of Violent Crime"
author: "Workshop 10 <br> Euan McKerron, Yujun Ling, Akshit Wadhawan & Ariane Baillie"
institute: "University of Edinburgh"
date: "`r Sys.Date()`"
output:
  xaringan::moon_reader:
    css: xaringan-themer.css
    lib_dir: libs
    nature:
      ratio: "16:9"
      highlightStyle: github
      highlightLines: true
      countIncrementalSlides: false
      
---

```{r install-package, include = FALSE, eval = FALSE}
# Copy and paste the following code into your console to download and install
# the `xaringan` package that contains all of the code which allows you 
# to create presentation slides in Rmarkdown
```


```{r load-packages, include = FALSE}
# Add any additional packages you need to this chunk
library(tidyverse)
library(tidymodels)
library(palmerpenguins)
library(knitr)
library(xaringanthemer)
library(readxl)
library(janitor)
library(ggplot2)
library(lubridate)
library(zoo)
library(scales)
library(dplyr)
library(yardstick)
library(kableExtra)
```

```{r setup, include=FALSE}
# For better figure resolution
knitr::opts_chunk$set(fig.retina = 3, dpi = 300, fig.width = 6, fig.asp = 0.618, out.width = "80%")
```

```{r load-data, include=FALSE}
# Load your data here
data <- read_excel("data/Copy of Punishments.xlsx")

data_names <- data %>% janitor::clean_names()

data_type <- data_names %>%
  mutate(offence_type = ifelse(
    offence == "Violence", "Violent", "Non-Violent"
  )) %>%
  select(predominant_function_of_establishment, age_group, offence_type, sex)

data_type$age_group <- as.factor(data_type$age_group)
data_type$offence_type <- as.factor(data_type$offence_type)
data_type$predominant_function_of_establishment <- as.factor(data_type$predominant_function_of_establishment)
data_type$sex <- as.factor(data_type$sex)

colnames(data_type) <- c("est_type", "age_group", "offence_type", "sex")
```

```{r include=FALSE}

#Background image
style_xaringan(
  title_slide_background_image = "img/ministry of justice.jpg"
)
```


# Introduction

- This project explores how factors such as age, sex, and location shape both the types of offences committed and the sentencing outcomes that follow. By analyzing these patterns in the available data, we also investigate whether it is possible to make reliable predictions about future crime trends and understand how these factors interact over time.

---

# Data Overview

- This investigation uses data from the Offender Management Statistics Quarterly: January to March 2023, published by the Ministry of Justice. The dataset provides detailed administrative records on individuals entering, leaving, or serving sentences within the criminal justice system in England and Wales.
- Our main variables after cleaning includes:
```{r, echo = FALSE, results = 'asis'}
Var_table <- data.frame(
  Variable = c("", "", ""),
  Type = c("", "", ""),
  Description = c("", "", "")
)

knitr::kable(Var_table)
```
These variables allow us to explore how age, sex, offence type, location, and sentence length relate to violent crime. Using official government data ensures the analysis is reliable and nationally representative.
---

#Exploratory statistics

- Write about what the statistics suggests about offence type being influenced by variables, and which variables show a strong influence

---

class: inverse, middle, center

# Initial Exploration and Data Visualisations

---

# Graphs

- Use `---` to separate slides and `--` for incremental builds

--

- (describe what each bar plot shows in terms of changing proportion of violent to non-violent crimes, because sex doesnt have any change say why we discount it going forward in the investigation)

---

# Layouts

You can use plain text

- or bullet points

.pull-left[
or text in two columns $^*$
]
.pull-right[
- like
- this
]

.footnote[
[*] And add footnotes
]

---

# Code/ table example

.pull-left[
- Some text
- goes here
]
.pull-right[
```{r table, echo = FALSE}
# table, hiding the code with echo = FALSE
data_type_sex <- data_type %>%
  select(offence_type, sex) %>%
  mutate(
    count = n(),
    count = case_when(count == 37552 ~ 1),
    count = as.numeric(count))

data_type_sex_tibble <- data_type_sex %>%
  pivot_wider(
    names_from = sex,
    values_from = count,
    values_fn = sum
  )
as_tibble(data_type_sex_tibble)
```
]

---

# Tables

If you want to generate a table, make sure it is in the HTML format (instead of Markdown or other formats), e.g.,

```{r iris-table, echo = FALSE}
kable(head(iris), format = "html")
```

---

# Images

```{r castle, echo = FALSE, out.width = "55%", fig.align = "center", fig.cap = "Image credit: Photo by JÃ¶rg Angeli on Unsplash."}
include_graphics("img/edinburgh-castle.jpg")
```

Or you can also include a full page image. See next slide.

---


class: inverse, center, middle
background-image: url(img/edinburgh-castle.jpg)
background-size: contain
---

# Math Expressions

You can write LaTeX math expressions inside a pair of dollar signs, e.g. &#36;\alpha+\beta$ renders $\alpha+\beta$. You can use the display style with double dollar signs:

```
$$\bar{X}=\frac{1}{n}\sum_{i=1}^nX_i$$
```

$$\bar{X}=\frac{1}{n}\sum_{i=1}^nX_i$$

Limitations:

1. The source code of a LaTeX math expression must be in one line, unless it is inside a pair of double dollar signs, in which case the starting `$$` must appear in the very beginning of a line, followed immediately by a non-space character, and the ending `$$` must be at the end of a line, led by a non-space character;

1. There should not be spaces after the opening `$` or before the closing `$`.

1. Math does not work on the title slide (see [#61](https://github.com/yihui/xaringan/issues/61) for a workaround).

---

class: inverse, middle, center

# Modelling and Model Evaluation

---

# Add stuff to do with model here

---

class: inverse, middle, center

# Conclusion

---

# Conclusion

- (add reference at bottom)
